# QQ 任务自动化工具

这是一个基于 Python 的自动化工具，旨在简化 QQ 及其相关应用（如 QQ 音乐、波点音乐）的日常任务。它使用雷电模拟器配合图像识别和自动化脚本来执行各种活动。

## 运行环境

在开始使用之前，请确保您的环境满足以下要求：

1.  **模拟器要求**：
    *   **必须安装 [雷电模拟器 9](https://www.ldmnq.com/)**。
    *   请确保模拟器安装路径没有特殊权限限制。

2.  **环境配置**：
    *   打开 **雷电多开器**。
    *   创建一个新的模拟器环境（或者使用现有的）。
    *   程序启动时会自动把模拟器设置为自定义，分辨率设置为 **504x955 (DPI=240)**，图像识别功能是基于此分辨率开发的，如果手动更改为其他分辨率，可能会严重降低识别率甚至无法运行。

3.  **应用安装**：
    *   在模拟器中预先安装以下应用：
        *   **QQ**
        *   **QQ 音乐**
        *   **波点音乐**
    *   **重要**：安装完成后，请先**手动启动**这些应用，并**分别完成账号登陆**。脚本目前不包含首次登陆验证（如滑块、短信验证码等）的处理。

4.  **打包程序**：
    *   打包好的可执行程序（.exe）位于 `dist` 目录中。
    *   您可以直接进入 `dist` 目录运行程序，无需安装 Python 环境。
    *   **注意**：请确保 `config.json` 文件与打包程序在同一层级，以便程序正常加载配置。assets 资源已内置于程序中，无需额外配置。

5.  **配置文件**：
    *   找到项目根目录下的 `config.json` 文件。
    *   使用文本编辑器打开它。
    *   修改 `ldplayer_path` 为您的雷电模拟器安装目录（包含 `dnconsole.exe` 的文件夹）。
    *   (可选) 添加 `friend_qq` 字段以启用“添加好友”任务，多个号码用逗号分隔。QQ号码的设置“加我为好友的方式”必须设置为“允许任何人”，可以自己用一些小号或者找一些长时间不登录的死号
    *   示例：
        ```json
        {
            "ldplayer_path": "D:\\leidian\\LDPlayer9",
            "emulator_timeout": 60,
            "friend_qq": "12345678,87654321"
        }
        ```

6.  **启动与部署**：
    *   **管理员权限**：无论是启动开发工具（如 Cursor、Trae、PyCharm）还是运行打包好的程序，**必须使用管理员模式打开**，否则可能无法控制雷电模拟器。
    *   **程序部署**：如果是运行打包好的 `.exe` 程序，请确保程序文件与 `config.json` 位于**同一目录**下，否则无法读取配置。

## 支持功能和任务

本项目支持多种自动化任务，主要包括：

*   **基础功能**：
    *   模拟器自动启动与连接
    *   应用自动启动
    *   通用弹窗处理（签到、广告等）

*   **支持的任务列表**：
    *   **福利社** (`fu_li_she.py`)
    *   **发布说说** (`fa_bu_shuo_shuo.py`)
    *   **AI 妙绘** (`ai_miao_hui.py`)
    *   **盲盒签** (`mang_he_qian.py`)
    *   **点赞说说** (`dian_zan_shuo_shuo.py`)
    *   **浏览空间** (`liu_lan_kong_jian.py`)
    *   **登陆农场** (`deng_lu_nong_chang.py`)
    *   **日签打卡** (`ri_qian_da_ka.py`)
    *   **金币加速** (`jin_bi_jia_su.py`)
    *   **天天福利** (`tian_tian_fu_li.py`)
    *   **免费小说** (`mian_fei_xiao_shuo.py`): 自动化阅读或签到。
    *   **QQ 音乐简洁** (`qq_yin_yue_jian_jie_ban.py`): 听歌、签到等任务。
    *   **添加好友** (`tian_jia_hao_you.py`): 批量自动添加好友，支持智能重加。

## 添加好友功能说明

**添加好友** (`tian_jia_hao_you.py`) 模块专为批量添加好友设计，包含以下核心逻辑：

1.  **配置驱动**：
    *   需要在 `config.json` 中配置 `friend_qq` 字段。
    *   支持多个 QQ 号，以逗号分隔（例如 `"friend_qq": "123456, 654321"`）。
2.  **智能流程**：
    *   **搜索与识别**：自动进入搜索页，输入 QQ 号查找。
    *   **状态判断**：智能识别当前页面状态（是“添加”、“发送”还是“已是好友”）。
    *   **已存在处理**：如果检测到对方已经是好友，会自动执行 **删除好友** 流程，随后 **重启 QQ** 并自动重试添加，确保新的好友申请能成功发送。
3.  **输入模拟**：
    *   使用 ADB 逐字输入 QQ 号，模拟人工操作，避免部分输入框粘贴失效问题。

## 技术栈

本项目使用了以下核心技术和库：

*   **编程语言**: Python 3
*   **GUI 界面**: `Tkinter` (Python 内置图形库) - 提供用户操作界面 (`gui_main.py`)。
*   **自动化控制**: 
    *   `uiautomator2` / `adbutils`: 用于 Android 设备的 ADB 连接和控件操作。
    *   `LDPlayer CLI`: 通过命令行管理雷电模拟器。
*   **图像识别**: 
    *   `OpenCV` (`opencv-python`): 用于图像匹配和查找。
    *   `Pillow` (`PIL`): 用于图像处理。
*   **日志系统**: `Loguru`: 提供美观且强大的日志记录功能，并集成到了 GUI 界面中。